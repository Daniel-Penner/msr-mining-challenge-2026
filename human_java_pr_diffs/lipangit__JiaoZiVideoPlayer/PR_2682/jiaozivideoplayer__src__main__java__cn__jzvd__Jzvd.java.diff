@@ -137,7 +137,7 @@ public void init(Context context) {
 
         mScreenWidth = getContext().getResources().getDisplayMetrics().widthPixels;
         mScreenHeight = getContext().getResources().getDisplayMetrics().heightPixels;
-
+        jzDataSource = new JZDataSource("");
         state = STATE_IDLE;
     }
 
@@ -181,14 +181,13 @@ public void onClick(View v) {
                 return;
             }
             if (state == STATE_NORMAL) {
-                if (!jzDataSource.getCurrentUrl().toString().startsWith("file") && !
-                        jzDataSource.getCurrentUrl().toString().startsWith("/") &&
-                        !JZUtils.isWifiConnected(getContext()) && !WIFI_TIP_DIALOG_SHOWED) {//这个可以放到std中
+                if (!JZUtils.isWifiConnected(getContext()) && !isCached() && !WIFI_TIP_DIALOG_SHOWED) {
                     showWifiDialog();
                     return;
                 }
                 startVideo();
-            } else if (state == STATE_PLAYING) {
+                //开始的事件应该在播放之后，此处特殊
+            } else if (state == STATE_PLAYING || state == STATE_PREPARING) {
                 Log.d(TAG, "pauseVideo [" + this.hashCode() + "] ");
                 mediaInterface.pause();
                 onStatePause();
@@ -211,6 +210,10 @@ public void onClick(View v) {
         }
     }
 
+    public boolean isCached() {
+        return jzDataSource.getCurrentUrl().toString().startsWith("file") || jzDataSource.getCurrentUrl().toString().startsWith("/");
+    }
+
     @Override
     public boolean onTouch(View v, MotionEvent event) {
         float x = event.getX();